<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <GeneratedTemporalStubsDirName Condition=" '$(GeneratedTemporalStubsDirName)' == '' ">_AutoGenerated</GeneratedTemporalStubsDirName>
    <EmitCompilerGeneratedFiles Condition=" '$(EmitCompilerGeneratedFiles)' == '' ">true</EmitCompilerGeneratedFiles>
    <CompilerGeneratedFilesOutputPath Condition=" '$(EmitCompilerGeneratedFiles)' == 'true' ">$(MSBuildProjectDirectory)\$(GeneratedTemporalStubsDirName)</CompilerGeneratedFilesOutputPath>
  </PropertyGroup>

  <ItemGroup Condition=" '$(EmitCompilerGeneratedFiles)' == 'true' ">
    <AutoGeneratedFiles Include="$(CompilerGeneratedFilesOutputPath)/**/*.*" />
    <Compile Remove="@(AutoGeneratedFiles)" />
    <None Include="@(AutoGeneratedFiles)" Link="$(GeneratedTemporalStubsDirName)\%(RecursiveDir)%(Filename)%(Extension)" Visible="true" />
  </ItemGroup>

  <Target Name="TemporalStubGenerator_PrintBuildInfo"  BeforeTargets="Build">

    <Message Importance="high" Text=" " />
    
    <Message Importance="high"
             Text="[TmprlStubGen] Temporal-Stub-Generator is used in this build." />

    <Message Importance="high"
             Text="[TmprlStubGen] GeneratedTemporalStubsDirName:     &quot;$(GeneratedTemporalStubsDirName)&quot;" />

    <Message Importance="high"
             Text="[TmprlStubGen] EmitCompilerGeneratedFiles:        &quot;$(EmitCompilerGeneratedFiles)&quot;" />

    <Message Importance="high"
             Text="[TmprlStubGen] CompilerGeneratedFilesOutputPath:  &quot;$(CompilerGeneratedFilesOutputPath)&quot;" />

    <Message Importance="high"
             Text="[TmprlStubGen] AutoGeneratedFiles:                &quot;@(AutoGeneratedFiles)&quot;" />

    <Message Importance="high" Text=" " />
  </Target>

</Project>
